{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/marco/Desktop/AWM_restaurant/AWM_Restaurant/mobile/MobileRestaurant/UpdateButton.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\n\nvar UpdateButton = function (_Component) {\n  _inherits(UpdateButton, _Component);\n\n  var _super = _createSuper(UpdateButton);\n\n  function UpdateButton(props) {\n    var _this;\n\n    _classCallCheck(this, UpdateButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      data: [],\n      loaded: false\n    };\n    return _this;\n  }\n\n  _createClass(UpdateButton, [{\n    key: \"sendPUT\",\n    value: function sendPUT(obj, plate_list) {\n      var csrftoken = Cookies.get('csrftoken');\n      var json_obj = JSON.stringify(obj);\n      var xhr = new XMLHttpRequest();\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          var resp = JSON.parse(xhr.response);\n\n          if (1) {\n            document.getElementById('order_plate_list').innerText = plate_list.join(\", \");\n          } else {\n            var container = document.getElementById(\"inbtnjsonResp\");\n            var info = \"The number entered does not corrispond to any Order\";\n            render(info, container);\n          }\n        }\n      };\n\n      xhr.open(\"PUT\", \"/restaurant/order\", true);\n      xhr.setRequestHeader(\"Content-type\", \"application/json\");\n      xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n      xhr.send(json_obj);\n    }\n  }, {\n    key: \"makeOrder\",\n    value: function makeOrder() {\n      var send_obj = {};\n      var plate_obj = {};\n      var plate_list = [];\n      var plates = document.getElementsByName(\"selected_plate\");\n      var numInputOrder = document.getElementById(\"numInputOrder\");\n      send_obj['order_id'] = numInputOrder.getAttribute(\"value\");\n\n      for (var i = 0; i < plates.length; i++) {\n        var toCutStart = \"plate_\".length;\n        var toCutEnd = \"_check\".length;\n        var plate_code = plates[i].parentElement.id.slice(toCutStart);\n        plate_list.push(\"\".concat(plate_code.toString(), \" - \", plates[i].parentElement.firstElementChild.innerText));\n        plate_obj[plate_code] = plates[i].getAttribute(\"value\");\n      }\n\n      this.setState({\n        data: plate_obj\n      });\n      send_obj['plates'] = plate_obj;\n      this.sendPUT(send_obj, plate_list);\n      console.log(send_obj);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Button, {\n        title: \"Update Order\",\n        onPress: function onPress() {\n          _this2.props.navigation.navigate('Home');\n\n          _this2.props.navigation.navigate('Details');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 5\n        }\n      });\n    }\n  }]);\n\n  return UpdateButton;\n}(Component);\n\nexport default UpdateButton;","map":{"version":3,"sources":["/home/marco/Desktop/AWM_restaurant/AWM_Restaurant/mobile/MobileRestaurant/UpdateButton.js"],"names":["React","Component","render","UpdateButton","props","state","data","loaded","obj","plate_list","csrftoken","Cookies","get","json_obj","JSON","stringify","xhr","XMLHttpRequest","onreadystatechange","readyState","resp","parse","response","document","getElementById","innerText","join","container","info","open","setRequestHeader","send","send_obj","plate_obj","plates","getElementsByName","numInputOrder","getAttribute","i","length","toCutStart","toCutEnd","plate_code","parentElement","id","slice","push","concat","toString","firstElementChild","setState","sendPUT","console","log","navigation","navigate"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport {FlatList, ActivityIndicator, Text, View, Button} from 'react-native';\n\nclass UpdateButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      loaded: false,\n    };\n  }\n\n   sendPUT(obj, plate_list)\n   {\n        const csrftoken = Cookies.get('csrftoken');\n\t\tvar json_obj = JSON.stringify(obj);\n\n        var xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = function()\n\t\t{\n\t\t\tif (xhr.readyState === 4)\n\t\t\t{\n\t\t\t    var resp = JSON.parse(xhr.response);\n\t\t\t    if(1)\n\t\t\t    {\n\t\t\t        document.getElementById('order_plate_list').innerText = plate_list.join(\", \");\n\t\t\t    }\n\t\t\t    else\n\t\t\t    {\n                    const container = document.getElementById(\"inbtnjsonResp\");\n                    var info = \"The number entered does not corrispond to any Order\"\n                    render(info, container);\n\t\t\t    }\n\t\t\t}\n\t\t}\n\n\t\txhr.open(\"PUT\", \"/restaurant/order\", true);\n\t\txhr.setRequestHeader(\"Content-type\", \"application/json\");\n\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken)\n\t\txhr.send(json_obj);\n   }\n\n   makeOrder(){\n\n        var send_obj = {};\n        var plate_obj = {};\n        var plate_list = [];\n\n        var plates = document.getElementsByName(\"selected_plate\");\n        var numInputOrder = document.getElementById(\"numInputOrder\");\n\t    send_obj['order_id'] = numInputOrder.getAttribute(\"value\");\n\n        for (var i=0;i< plates.length;i++){\n            var toCutStart = \"plate_\".length;\n            var toCutEnd = \"_check\".length;\n            var plate_code = plates[i].parentElement.id.slice(toCutStart);\n\n            plate_list.push(\"\".\n                             concat(plate_code.toString(),\n                             \" - \",\n                             plates[i].parentElement.firstElementChild.innerText)\n                            );\n\n            plate_obj[plate_code] = plates[i].getAttribute(\"value\")\n        }\n\n        this.setState({data: plate_obj});\n\n        send_obj['plates'] = plate_obj;\n        this.sendPUT(send_obj, plate_list)\n        console.log(send_obj)\n   }\n\n  render() {\n    return (\n    <Button title=\"Update Order\" onPress={() => {this.props.navigation.navigate('Home');\n                                                 this.props.navigation.navigate('Details');\n                                                 }} />\n    );\n  }\n}\n\nexport default UpdateButton;\n"]},"metadata":{},"sourceType":"module"}